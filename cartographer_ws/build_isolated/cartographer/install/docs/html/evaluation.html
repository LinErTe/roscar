<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Evaluation &mdash; Cartographer 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Cartographer 1.0.0 documentation" href="index.html" />
    <link rel="next" title="Terminology" href="terminology.html" />
    <link rel="prev" title="Configuration" href="configuration.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="terminology.html" title="Terminology"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="Configuration"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Cartographer 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="evaluation">
<h1>Evaluation<a class="headerlink" href="#evaluation" title="Permalink to this headline">¶</a></h1>
<p>Performing evaluation is a crucial part of developing a SLAM system.
For this purpose, Cartographer offers built-in tools that can aid the tuning process or can be used for quality assurance purposes.</p>
<p>These tools can be used to assess the SLAM result even when no dedicated ground truth is available.
This is in contrast to public SLAM benchmarks like e.g the KITTI dataset <a class="footnote-reference" href="#id4" id="id1">[1]</a> or the TUM RGB-D dataset <a class="footnote-reference" href="#id5" id="id2">[2]</a>, where highly-precise ground truth states (GPS-RTK, motion capture) are available as a reference.</p>
<div class="section" id="concept">
<h2>Concept<a class="headerlink" href="#concept" title="Permalink to this headline">¶</a></h2>
<p>The process comprises two steps:</p>
<ol class="arabic simple">
<li>auto-generation of &#8220;ground truth&#8221; relations</li>
<li>evaluation of the test data against the generated ground truth</li>
</ol>
<p>The evaluation is based on the pose relations metric proposed in <a class="footnote-reference" href="#id6" id="id3">[3]</a>.
Rather than comparing the pose of a trajectory node directly to the corresponding ground truth pose, it compares the relative poses between two trajectory nodes in the probe data to the corresponding relation of two trajectory nodes in the ground truth trajectory.</p>
<p>In Cartographer, we can generate such ground truth relations from trajectories with loop closures.
Let an optimized trajectory with loop closures be the input for the ground truth generation.
We select the relations from loop closure constraints that satisfy the following criteria:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">min_covered_distance</span></code>: Minimum covered distance in meters before a loop closure is considered a candidate for autogenerated ground truth.</li>
<li><code class="docutils literal"><span class="pre">outlier_threshold_meters</span></code>: Distance in meters beyond which constraints are considered outliers.</li>
<li><code class="docutils literal"><span class="pre">outlier_threshold_radians</span></code>: Distance in radians beyond which constraints are considered outliers.</li>
</ul>
<p>We can assume the pose relations of neighboring trajectory nodes fulfilling these requirements to be locally correct in a fully optimized trajectory.
Although this is not a ground truth in the sense of an independent input from another source, we can now use it to evaluate the quality of local SLAM results that were generated without loop closure optimization.</p>
<p>The following figure illustrates the concept.
On the left side, the ground truth relations are visualized as green connections between trajectory nodes of a fully optimized trajectory.
On the right side, the corresponding relations in a non-optimized trajectory are shown in red.</p>
<p>The actual metric that is computed is the difference between the ground truth (green) and the probe (red) relations.</p>
<img alt="_images/autogenerate_groundtruth.png" src="_images/autogenerate_groundtruth.png" />
</div>
<div class="section" id="advantages-limitations">
<h2>Advantages &amp; Limitations<a class="headerlink" href="#advantages-limitations" title="Permalink to this headline">¶</a></h2>
<p>The first obvious advantage is the easier data collection process compared to a cumbersome ground truth setup.
Another great advantage of this methodology is that the SLAM system can be evaluated in any custom sensor configuration (compared to public benchmarks where we are restricted to the data and the sensor configuration of the authors).</p>
<p>However, this type of self-evaluation is not suitable for measuring the accuracy of the full SLAM system with all optimizations enabled - only an evaluation with <em>real</em> ground truth states can provide that.
Furthermore, trajectory nodes outside of loop closure areas can&#8217;t be considered.</p>
</div>
<div class="section" id="how-to">
<h2>How-To<a class="headerlink" href="#how-to" title="Permalink to this headline">¶</a></h2>
<p>Given a serialized state of a fully optimized trajectory (here: <code class="docutils literal"><span class="pre">optimized.pbstream</span></code> file), the ground truth relations can be generated with the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">cd</span> &lt;build&gt;  <span class="c1"># (directory where Cartographer&#39;s binaries are located)</span>
./cartographer_autogenerate_ground_truth -pose_graph_filename optimized.pbstream -output_filename relations.pbstream -min_covered_distance <span class="m">100</span> -outlier_threshold_meters 0.15 -outlier_threshold_radians 0.02
</pre></div>
</div>
<p>Then, a non-optimized trajectory <code class="docutils literal"><span class="pre">test.pbstream</span></code> can be evaluated against the generated relations with:</p>
<div class="highlight-bash"><div class="highlight"><pre>./cartographer_compute_relations_metrics -relations_filename relations.pbstream -pose_graph_filename test.pbstream
</pre></div>
</div>
<p>This will produce output in this form:</p>
<div class="highlight-none"><div class="highlight"><pre>Abs translational error 0.01944 +/- 0.01819 m
Sqr translational error 0.00071 +/- 0.00189 m^2
Abs rotational error 0.11197 +/- 0.12432 deg
Sqr rotational error 0.02799 +/- 0.07604 deg^2
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Andreas Geiger, Philip Lenz and Raquel Urtasun.
<em>Are we ready for Autonomous Driving? The KITTI Vision Benchmark Suite</em>.
CVPR, 2012.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>Jürgen Sturm, Nikolas Engelhard, Felix Endres, Wolfram Burgard and Daniel Cremers.
<em>A Benchmark for the Evaluation of RGB-D SLAM Systems</em>.
IROS, 2012.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td>Rainer Kümmerle, Bastian Steder, Christian Dornhege, Michael Ruhnke, Giorgio Grisetti, Cyrill Stachniss and Alexander Kleiner.
<em>On measuring the accuracy of SLAM algorithms.</em>
Autonomous Robots 27(4), pp.387-407, 2009.</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Evaluation</a><ul>
<li><a class="reference internal" href="#concept">Concept</a></li>
<li><a class="reference internal" href="#advantages-limitations">Advantages &amp; Limitations</a></li>
<li><a class="reference internal" href="#how-to">How-To</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="configuration.html"
                        title="previous chapter">Configuration</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="terminology.html"
                        title="next chapter">Terminology</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/evaluation.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="terminology.html" title="Terminology"
             >next</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="Configuration"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Cartographer 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016 The Cartographer Authors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>